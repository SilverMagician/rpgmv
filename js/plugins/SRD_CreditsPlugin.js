/*:
 * @plugindesc Adds a scene to your game that allows developers to give organized credits to people.
 * @author SumRndmDde
 *
 * @param File Location
 * @desc This is the location and name of the file containing the info for links and descriptions.
 * @default data/srd-credits.txt
 *
 * @param Add to Title?
 * @desc If this is set to 'true', a command will be added to the title screen that will open the credits page.
 * @default true
 *
 * @param Command Name
 * @desc The name of the command on the title command window.
 * @default Credits
 *
 * @param == Window Options ==
 * @default
 *
 * @param Use Desc. Window
 * @desc If this is 'true', the description window will be shown on the right side of the screen.
 * @default true
 *
 * @param Desc. Text Size
 * @desc The font size of the text within the description window.
 * @default 20
 *
 * @param Category Rows
 * @desc The amount of rows on the category window.
 * @default 1
 *
 * @param Category Columns
 * @desc The amount of columns on the category window.
 * @default 4
 *
 * @param Text Alignment
 * @desc The alignment of the names/credits text on the left side of the screen.
 * @default left
 *
 * @param == Category 1 ==
 * @default
 *
 * @param Category 1 Name
 * @desc The name of category 1 in the credits menu.
 * @default Plugins
 *
 * @param Category 1 Credits
 * @desc A list of all the individual credits on in category 1.
 * Separate each with a comma.
 * @default SumRndmDde, Example1, Example2
 *
 * @param == Category 2 ==
 * @default
 *
 * @param Category 2 Name
 * @desc The name of category 2 in the credits menu.
 * @default Music
 *
 * @param Category 2 Credits
 * @desc A list of all the individual credits on in category 2.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 3 ==
 * @default
 *
 * @param Category 3 Name
 * @desc The name of category 3 in the credits menu.
 * @default Art
 *
 * @param Category 3 Credits
 * @desc A list of all the individual credits on in category 3.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 4 ==
 * @default
 *
 * @param Category 4 Name
 * @desc The name of category 4 in the credits menu.
 * @default Special
 *
 * @param Category 4 Credits
 * @desc A list of all the individual credits on in category 4.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 5 ==
 * @default
 *
 * @param Category 5 Name
 * @desc The name of category 5 in the credits menu.
 * @default
 *
 * @param Category 5 Credits
 * @desc A list of all the individual credits on in category 5.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 6 ==
 * @default
 *
 * @param Category 6 Name
 * @desc The name of category 6 in the credits menu.
 * @default
 *
 * @param Category 6 Credits
 * @desc A list of all the individual credits on in category 6.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 7 ==
 * @default
 *
 * @param Category 7 Name
 * @desc The name of category 7 in the credits menu.
 * @default
 *
 * @param Category 7 Credits
 * @desc A list of all the individual credits on in category 7.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 8 ==
 * @default
 *
 * @param Category 8 Name
 * @desc The name of category 8 in the credits menu.
 * @default
 *
 * @param Category 8 Credits
 * @desc A list of all the individual credits on in category 8.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 9 ==
 * @default
 *
 * @param Category 9 Name
 * @desc The name of category 9 in the credits menu.
 * @default
 *
 * @param Category 9 Credits
 * @desc A list of all the individual credits on in category 9.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 10 ==
 * @default
 *
 * @param Category 10 Name
 * @desc The name of category 10 in the credits menu.
 * @default
 *
 * @param Category 10 Credits
 * @desc A list of all the individual credits on in category 10.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 11 ==
 * @default
 *
 * @param Category 11 Name
 * @desc The name of category 11 in the credits menu.
 * @default
 *
 * @param Category 11 Credits
 * @desc A list of all the individual credits on in category 11.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 12 ==
 * @default
 *
 * @param Category 12 Name
 * @desc The name of category 12 in the credits menu.
 * @default
 *
 * @param Category 12 Credits
 * @desc A list of all the individual credits on in category 12.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 13 ==
 * @default
 *
 * @param Category 13 Name
 * @desc The name of category 13 in the credits menu.
 * @default
 *
 * @param Category 13 Credits
 * @desc A list of all the individual credits on in category 13.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 14 ==
 * @default
 *
 * @param Category 14 Name
 * @desc The name of category 14 in the credits menu.
 * @default
 *
 * @param Category 14 Credits
 * @desc A list of all the individual credits on in category 14.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 15 ==
 * @default
 *
 * @param Category 15 Name
 * @desc The name of category 15 in the credits menu.
 * @default
 *
 * @param Category 15 Credits
 * @desc A list of all the individual credits on in category 15.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 16 ==
 * @default
 *
 * @param Category 16 Name
 * @desc The name of category 16 in the credits menu.
 * @default
 *
 * @param Category 16 Credits
 * @desc A list of all the individual credits on in category 16.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 17 ==
 * @default
 *
 * @param Category 17 Name
 * @desc The name of category 17 in the credits menu.
 * @default
 *
 * @param Category 17 Credits
 * @desc A list of all the individual credits on in category 17.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 18 ==
 * @default
 *
 * @param Category 18 Name
 * @desc The name of category 18 in the credits menu.
 * @default
 *
 * @param Category 18 Credits
 * @desc A list of all the individual credits on in category 18.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 19 ==
 * @default
 *
 * @param Category 19 Name
 * @desc The name of category 19 in the credits menu.
 * @default
 *
 * @param Category 19 Credits
 * @desc A list of all the individual credits on in category 19.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 20 ==
 * @default
 *
 * @param Category 20 Name
 * @desc The name of category 20 in the credits menu.
 * @default
 *
 * @param Category 20 Credits
 * @desc A list of all the individual credits on in category 20.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 21 ==
 * @default
 *
 * @param Category 21 Name
 * @desc The name of category 21 in the credits menu.
 * @default
 *
 * @param Category 21 Credits
 * @desc A list of all the individual credits on in category 21.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 22 ==
 * @default
 *
 * @param Category 22 Name
 * @desc The name of category 22 in the credits menu.
 * @default
 *
 * @param Category 22 Credits
 * @desc A list of all the individual credits on in category 22.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 23 ==
 * @default
 *
 * @param Category 23 Name
 * @desc The name of category 23 in the credits menu.
 * @default
 *
 * @param Category 23 Credits
 * @desc A list of all the individual credits on in category 23.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 24 ==
 * @default
 *
 * @param Category 24 Name
 * @desc The name of category 24 in the credits menu.
 * @default
 *
 * @param Category 24 Credits
 * @desc A list of all the individual credits on in category 24.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 25 ==
 * @default
 *
 * @param Category 25 Name
 * @desc The name of category 25 in the credits menu.
 * @default
 *
 * @param Category 25 Credits
 * @desc A list of all the individual credits on in category 25.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 26 ==
 * @default
 *
 * @param Category 26 Name
 * @desc The name of category 26 in the credits menu.
 * @default
 *
 * @param Category 26 Credits
 * @desc A list of all the individual credits on in category 26.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 27 ==
 * @default
 *
 * @param Category 27 Name
 * @desc The name of category 27 in the credits menu.
 * @default
 *
 * @param Category 27 Credits
 * @desc A list of all the individual credits on in category 27.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 28 ==
 * @default
 *
 * @param Category 28 Name
 * @desc The name of category 28 in the credits menu.
 * @default
 *
 * @param Category 28 Credits
 * @desc A list of all the individual credits on in category 28.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 29 ==
 * @default
 *
 * @param Category 29 Name
 * @desc The name of category 29 in the credits menu.
 * @default
 *
 * @param Category 29 Credits
 * @desc A list of all the individual credits on in category 29.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 30 ==
 * @default
 *
 * @param Category 30 Name
 * @desc The name of category 30 in the credits menu.
 * @default
 *
 * @param Category 30 Credits
 * @desc A list of all the individual credits on in category 30.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 31 ==
 * @default
 *
 * @param Category 31 Name
 * @desc The name of category 31 in the credits menu.
 * @default
 *
 * @param Category 31 Credits
 * @desc A list of all the individual credits on in category 31.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 32 ==
 * @default
 *
 * @param Category 32 Name
 * @desc The name of category 32 in the credits menu.
 * @default
 *
 * @param Category 32 Credits
 * @desc A list of all the individual credits on in category 32.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 33 ==
 * @default
 *
 * @param Category 33 Name
 * @desc The name of category 33 in the credits menu.
 * @default
 *
 * @param Category 33 Credits
 * @desc A list of all the individual credits on in category 33.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 34 ==
 * @default
 *
 * @param Category 34 Name
 * @desc The name of category 34 in the credits menu.
 * @default
 *
 * @param Category 34 Credits
 * @desc A list of all the individual credits on in category 34.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 35 ==
 * @default
 *
 * @param Category 35 Name
 * @desc The name of category 35 in the credits menu.
 * @default
 *
 * @param Category 35 Credits
 * @desc A list of all the individual credits on in category 35.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 36 ==
 * @default
 *
 * @param Category 36 Name
 * @desc The name of category 36 in the credits menu.
 * @default
 *
 * @param Category 36 Credits
 * @desc A list of all the individual credits on in category 36.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 37 ==
 * @default
 *
 * @param Category 37 Name
 * @desc The name of category 37 in the credits menu.
 * @default
 *
 * @param Category 37 Credits
 * @desc A list of all the individual credits on in category 37.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 38 ==
 * @default
 *
 * @param Category 38 Name
 * @desc The name of category 38 in the credits menu.
 * @default
 *
 * @param Category 38 Credits
 * @desc A list of all the individual credits on in category 38.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 39 ==
 * @default
 *
 * @param Category 39 Name
 * @desc The name of category 39 in the credits menu.
 * @default
 *
 * @param Category 39 Credits
 * @desc A list of all the individual credits on in category 39.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 40 ==
 * @default
 *
 * @param Category 40 Name
 * @desc The name of category 40 in the credits menu.
 * @default
 *
 * @param Category 40 Credits
 * @desc A list of all the individual credits on in category 40.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 41 ==
 * @default
 *
 * @param Category 41 Name
 * @desc The name of category 41 in the credits menu.
 * @default
 *
 * @param Category 41 Credits
 * @desc A list of all the individual credits on in category 41.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 42 ==
 * @default
 *
 * @param Category 42 Name
 * @desc The name of category 42 in the credits menu.
 * @default
 *
 * @param Category 42 Credits
 * @desc A list of all the individual credits on in category 42.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 43 ==
 * @default
 *
 * @param Category 43 Name
 * @desc The name of category 43 in the credits menu.
 * @default
 *
 * @param Category 43 Credits
 * @desc A list of all the individual credits on in category 43.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 44 ==
 * @default
 *
 * @param Category 44 Name
 * @desc The name of category 44 in the credits menu.
 * @default
 *
 * @param Category 44 Credits
 * @desc A list of all the individual credits on in category 44.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 45 ==
 * @default
 *
 * @param Category 45 Name
 * @desc The name of category 45 in the credits menu.
 * @default
 *
 * @param Category 45 Credits
 * @desc A list of all the individual credits on in category 45.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 46 ==
 * @default
 *
 * @param Category 46 Name
 * @desc The name of category 46 in the credits menu.
 * @default
 *
 * @param Category 46 Credits
 * @desc A list of all the individual credits on in category 46.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 47 ==
 * @default
 *
 * @param Category 47 Name
 * @desc The name of category 47 in the credits menu.
 * @default
 *
 * @param Category 47 Credits
 * @desc A list of all the individual credits on in category 47.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 48 ==
 * @default
 *
 * @param Category 48 Name
 * @desc The name of category 48 in the credits menu.
 * @default
 *
 * @param Category 48 Credits
 * @desc A list of all the individual credits on in category 48.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 49 ==
 * @default
 *
 * @param Category 49 Name
 * @desc The name of category 49 in the credits menu.
 * @default
 *
 * @param Category 49 Credits
 * @desc A list of all the individual credits on in category 49.
 * Separate each with a comma.
 * @default
 *
 * @param == Category 50 ==
 * @default
 *
 * @param Category 50 Name
 * @desc The name of category 50 in the credits menu.
 * @default
 *
 * @param Category 50 Credits
 * @desc A list of all the individual credits on in category 50.
 * Separate each with a comma.
 * @default
 *
 * @help
 *
 * Credits Plugin
 * Version 1.01
 * SumRndmDde
 *
 *
 * This is a plugin that adds an entirely new scene to your game for the 
 * purpose of giving credit!
 *
 * Anyway, here's how you set things up:
 *
 *
 * ==========================================================================
 *  Calling the Credits Page
 * ==========================================================================
 *
 * In order to open the Credits, simply use the Plugin Command:
 *
 *   OpenCredits
 *
 *
 * Or, alternatively, you can use the script call:
 *
 *   SceneManager.push(Scene_SRD_Credits)
 *
 *
 * If you wish to bind it to the menu using Yanfly's Main Menu Manager,
 * use the following bind:
 *
 *   this.openCredits.bind(this)
 *
 *
 * ==========================================================================
 *  Creating Categories
 * ==========================================================================
 *
 * In the Parameters, there are section for each category.
 * Categories are primarily meant to be things like: 
 * Plugins, Music, Tilesets, etc...
 *
 * Any category that has a name that isn't blank will be shown in game.
 *
 *
 * ==========================================================================
 *  Creating Credits
 * ==========================================================================
 *
 * Underneath a category's name is its credits.
 * This is simply a list of each credit you wish to give separated with 
 * commas.
 *
 * An example of this would be:
 *
 *   SumRndmDde, Google, The World, Dio, Butts
 *
 * Each one of these will be listed in the credits window and can have
 * their own link and description.
 *
 *
 * ==========================================================================
 *  Creating Credits File
 * ==========================================================================
 *
 * To properly use this Plugin, one must also create a text file.
 * The text file needs to be in the data folder and called "srd-text.txt".
 *
 * Within this file, you need to create notetags to set up the links and 
 * descriptions for each credit.
 *
 *
 * ==========================================================================
 *  Setting a Link for a Credit
 * ==========================================================================
 *
 * To set up a link for a credit, use the notetag within the file:
 *
 *   <Name Link: link-here>
 *
 * For example:
 *
 *   <SumRndmDde Link: http://sumrndm.site>
 *
 * This would make it so clicking on a credit named "SumRndmDde" would open
 * up my site. :-)
 *
 *
 * ==========================================================================
 *  Setting a Description for a Credit
 * ==========================================================================
 *
 * To set up a description for a credit, use the notetag within the file:
 *
 *   <Name Description>
 *   </Name Description>
 *
 * For example:
 *
 *   <SumRndmDde Description>
 *   Used some random plugins.
 *   They were pretty cool I guess.
 *   Only used the credit one though.
 *   I give it a 7/10.
 *   </SumRndmDde Description>
 *
 * This would make that description appear in the description window when
 * the credit "SumRndmDde" is highlighted.
 *
 * Also keep in mind that you can use text codes!
 *
 *
 * ==========================================================================
 *  End of Help File
 * ==========================================================================
 * 
 * Welcome to the bottom of the Help file.
 *
 *
 * Thanks for reading!
 * If you have questions, or if you enjoyed this Plugin, please check
 * out my YouTube channel!
 *
 * https://www.youtube.com/c/SumRndmDde
 *
 *
 * Until next time,
 *   ~ SumRndmDde
 *
 */

var SRD = SRD || {};
SRD.Credits = SRD.Credits || {};

var Imported = Imported || {};
Imported["SumRndmDde Credits"] = 1.01;

function Scene_SRD_Credits() {
	this.initialize.apply(this, arguments);
}

function Window_CreditsDescripton() {
	this.initialize.apply(this, arguments);
}

function Window_CreditsCategory() {
	this.initialize.apply(this, arguments);
}

function Window_CreditsList() {
	this.initialize.apply(this, arguments);
}

(function(_) {

"use strict";

var params = PluginManager.parameters('SRD_CreditsPlugin');

_.location = String(params['File Location']);
_.useTitle = String(params['Add to Title?']).trim().toLowerCase() === 'true';
_.titleName = String(params['Command Name']);

_.descWindow = String(params['Use Desc. Window']).trim().toLowerCase() === 'true';
_.fontSize = parseInt(params['Desc. Text Size']);
_.rows = parseInt(params['Category Rows']);
_.columns = parseInt(params['Category Columns']);
_.align = String(params['Text Alignment']);

_.categories = [];
_.lists = {};
_.fileInfo = '';

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET",_.location); 
xmlhttp.onload = function() {
	if (xmlhttp.status < 400) {
		_.fileInfo = xmlhttp.responseText;
		_.loadInfo();
	}
};
xmlhttp.send();

//-----------------------------------------------------------------------------
// SRD.Credits
//-----------------------------------------------------------------------------

_.loadInfo = function() {
	for(var i = 1; i <= 50; i++) {
		var category = String(params['Category ' + i + ' Name']);
		if(category.trim().length > 0) {
			var credits = String(params['Category ' + i + ' Credits']);
			var names = credits.split(/\s*,\s*/i);
			_.lists[category] = [];
			_.categories.push(category);
			for(var j = 0; j < names.length; j++) {
				
				_.lists[category][j] = {};
				_.lists[category][j].name = names[j];
				var link = new RegExp('<\\s*'+names[j]+'\\s*Link\\s*:\\s*(.*)>', 'im');
				if(_.fileInfo.match(link)) {
					_.lists[category][j].link = String(RegExp.$1);
				}
				var desc = new RegExp('<\\s*'+names[j]+'\\s*description\\s*>(?:[\\n\\r]+)?([\\d\\D\\n\\r]*)<\\/\\s*'+names[j]+'\\s*description\\s*>', 'im');
				if(_.fileInfo.match(desc)) {
					_.lists[category][j].desc = String(RegExp.$1);
				}
			}
		}
	}
};

//-----------------------------------------------------------------------------
// Game_Interpreter
//-----------------------------------------------------------------------------

var _Game_Interpreter_pluginCommand = Game_Interpreter.prototype.pluginCommand;
Game_Interpreter.prototype.pluginCommand = function(command, args) {
	_Game_Interpreter_pluginCommand.apply(this, arguments);
	if(command.trim().toLowerCase() === 'OpenCredits') {
		SceneManager.push(Scene_SRD_Credits);
	}
};

//-----------------------------------------------------------------------------
// Scene_Base
//-----------------------------------------------------------------------------

Scene_Base.prototype.openCredits = function() {
	SceneManager.push(Scene_SRD_Credits);
};

//-----------------------------------------------------------------------------
// Scene_Title
//-----------------------------------------------------------------------------

Scene_Title.prototype.openCredits = function() {
	this._commandWindow.close();
	SceneManager.push(Scene_SRD_Credits);
};

var _Scene_Title_createCommandWindow = Scene_Title.prototype.createCommandWindow;
Scene_Title.prototype.createCommandWindow = function() {
	_Scene_Title_createCommandWindow.apply(this, arguments);
	if(_.useTitle) this._commandWindow.setHandler('srd-credits', this.openCredits.bind(this));
};

//-----------------------------------------------------------------------------
// Window_TitleCommand
//-----------------------------------------------------------------------------

var _Window_TitleCommand_makeCommandList = Window_TitleCommand.prototype.makeCommandList;
Window_TitleCommand.prototype.makeCommandList = function() {
	_Window_TitleCommand_makeCommandList.apply(this, arguments);
	if(_.useTitle) this.addCommand(_.titleName, 'srd-credits');
};

//-----------------------------------------------------------------------------
// Scene_SRD_Credits
//-----------------------------------------------------------------------------

Scene_SRD_Credits.prototype = Object.create(Scene_MenuBase.prototype);
Scene_SRD_Credits.prototype.constructor = Scene_SRD_Credits;

Scene_SRD_Credits.prototype.initialize = function() {
	Scene_MenuBase.prototype.initialize.call(this);
};

Scene_SRD_Credits.prototype.create = function() {
	Scene_MenuBase.prototype.create.call(this);
	this.createWindowLayer();
	this.createCategoryWindow();
	this.createCreditsWindow();
	if(_.descWindow) this.createDescriptionWindow();
};

Scene_SRD_Credits.prototype.createCategoryWindow = function() {
	this._categoryWindow = new Window_CreditsCategory();
	this._categoryWindow.setHandler('ok', this.onCategoryOk.bind(this));
	this._categoryWindow.setHandler('cancel', this.popScene.bind(this));
	this.addWindow(this._categoryWindow);
};

Scene_SRD_Credits.prototype.createCreditsWindow = function() {
	var wy = this._categoryWindow.y + this._categoryWindow.height;
	var wh = Graphics.boxHeight - wy;
	var width = (_.descWindow) ? Graphics.boxWidth/2 : Graphics.boxWidth;
	this._creditWindow = new Window_CreditsList(0, wy, width, wh);
	this._creditWindow.setHandler('ok', this.onCreditOk.bind(this));
	this._creditWindow.setHandler('cancel', this.onCreditCancel.bind(this));
	this.addWindow(this._creditWindow);
	this._categoryWindow.setCreditWindow(this._creditWindow);
};

Scene_SRD_Credits.prototype.createDescriptionWindow = function() {
	this._descriptionWindow = new Window_CreditsDescripton(Graphics.boxWidth/2, this._creditWindow.height);
	this._descriptionWindow.x = this._creditWindow.width;
	this._descriptionWindow.y = this._creditWindow.y;
	this.addWindow(this._descriptionWindow);
	this._creditWindow.setDescriptionWindow(this._descriptionWindow);
};

Scene_SRD_Credits.prototype.onCategoryOk = function() {
	this._creditWindow.activate();
	this._creditWindow.selectLast();
};

Scene_SRD_Credits.prototype.onCreditOk = function() {
	this.useCredit();
};

Scene_SRD_Credits.prototype.onCreditCancel = function() {
	this._creditWindow.deselect();
	this._categoryWindow.activate();
	if(_.descWindow) this._descriptionWindow.clear();
};

Scene_SRD_Credits.prototype.useCredit = function() {
	if(this.credit().link) window.open(this.credit().link)
	this._creditWindow.activate();

};

Scene_SRD_Credits.prototype.credit = function() {
	return this._creditWindow.credit();
};

//-----------------------------------------------------------------------------
// Window_CreditsCategory
//-----------------------------------------------------------------------------

Window_CreditsCategory.prototype = Object.create(Window_HorzCommand.prototype);
Window_CreditsCategory.prototype.constructor = Window_CreditsCategory;

Window_CreditsCategory.prototype.initialize = function() {
	Window_HorzCommand.prototype.initialize.call(this, 0, 0);
};

Window_CreditsCategory.prototype.windowWidth = function() {
	return Graphics.boxWidth;
};

Window_CreditsCategory.prototype.maxCols = function() {
	return _.columns;
};

Window_CreditsCategory.prototype.numVisibleRows = function() {
	return _.rows;
};

Window_CreditsCategory.prototype.update = function() {
	Window_HorzCommand.prototype.update.call(this);
	if (this._creditWindow) {
		this._creditWindow.setCategory(this.currentSymbol());
	}
};

Window_CreditsCategory.prototype.makeCommandList = function() {
	for(var i = 0; i < _.categories.length; i++) {
		this.addCommand(_.categories[i], _.categories[i]);
	}
};

Window_CreditsCategory.prototype.setCreditWindow = function(creditWindow) {
	this._creditWindow = creditWindow;
	this.update();
};

//-----------------------------------------------------------------------------
// Window_CreditsList
//-----------------------------------------------------------------------------

Window_CreditsList.prototype = Object.create(Window_Selectable.prototype);
Window_CreditsList.prototype.constructor = Window_CreditsList;

Window_CreditsList.prototype.initialize = function(x, y, width, height) {
	Window_Selectable.prototype.initialize.call(this, x, y, width, height);
	this._category = 'none';
	this._data = [];
};

Window_CreditsList.prototype.setCategory = function(category) {
	if (this._category !== category) {
		this._category = category;
		this.refresh();
		this.resetScroll();
	}
};

Window_CreditsList.prototype.maxCols = function() {
	return 1;
};

Window_CreditsList.prototype.spacing = function() {
	return 48;
};

Window_CreditsList.prototype.maxItems = function() {
	return this._data ? this._data.length : 1;
};

Window_CreditsList.prototype.credit = function() {
	var index = this.index();
	return this._data && index >= 0 ? this._data[index] : null;
};

Window_CreditsList.prototype.makeItemList = function() {
	if(_.lists[this._category]) this._data = _.lists[this._category];
};

Window_CreditsList.prototype.drawItemName = function(item, x, y, width) {
	width = width || 312;
	if (item) {
		this.resetTextColor();
		this.drawText(item.name, x, y, width, _.align);
	}
};

Window_CreditsList.prototype.selectLast = function() {
	this.select(0);
};

Window_CreditsList.prototype.drawItem = function(index) {
	var item = this._data[index];
	if (item) {
		var rect = this.itemRect(index);
		rect.width -= this.textPadding();
		this.drawItemName(item, rect.x + 10, rect.y, rect.width - 10);
		this.changePaintOpacity(1);
	}
};

Window_CreditsList.prototype.refresh = function() {
	this.makeItemList();
	this.createContents();
	this.drawAllItems();
};

Window_CreditsList.prototype.setDescriptionWindow = function(descriptionWindow) {
	this._descriptionWindow = descriptionWindow;
	this.update();
};

Window_CreditsList.prototype.update = function() {
	Window_Selectable.prototype.update.call(this);
	if (this._descriptionWindow && this.credit() && this.credit().desc &&
		this._descriptionWindow._value != this.credit().desc) {
		this._descriptionWindow.setDescription(this.credit().desc);
	} else if(this.credit() && !this.credit().desc) {
		this._descriptionWindow.setDescription('');
	}
};

//-----------------------------------------------------------------------------
// Window_CreditsDescripton
//-----------------------------------------------------------------------------

Window_CreditsDescripton.prototype = Object.create(Window_Base.prototype);
Window_CreditsDescripton.prototype.constructor = Window_CreditsDescripton;

Window_CreditsDescripton.prototype.initialize = function(width, height) {
	Window_Base.prototype.initialize.call(this, 0, 0, width, height);
	this._value = '';
};

Window_CreditsDescripton.prototype.refresh = function() {
	this.contents.clear();
	var lines = this._value.split(/[\n\r]+/);
	for(var i = 0; i < lines.length; i++) {
		this.drawTextEx(lines[i], 0, i * this.lineHeight());
	}
};

Window_CreditsDescripton.prototype.standardFontSize = function() {
	return _.fontSize;
};

Window_CreditsDescripton.prototype.lineHeight = function() {
	return this.standardFontSize() + 8;
};

Window_CreditsDescripton.prototype.setDescription = function(description) {
	this._value = description;
	this.refresh();
};

Window_CreditsDescripton.prototype.clear = function() {
	this._value = '';
	this.refresh();
};

})(SRD.Credits);